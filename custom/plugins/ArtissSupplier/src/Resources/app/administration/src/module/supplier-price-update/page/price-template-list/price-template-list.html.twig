{% block price_template_list %}
    <sw-page class="price-template-list">
        {% block price_template_list_smart_bar_header %}
            <template #smart-bar-header>
                <h2>
                    {{ $tc('supplier.priceUpdate.general.mainMenuItemGeneral') }}
                    <span v-if="!isLoading" class="sw-page__smart-bar-amount">({{ total }})</span>
                </h2>
            </template>
        {% endblock %}

        {% block price_template_list_smart_bar_actions %}
            <template #smart-bar-actions>
                <sw-button
                    @click="onRecalculatePrices"
                    :isLoading="isRecalculating"
                >
                    {{ $tc('supplier.priceUpdate.list.buttonRecalculatePrices') }}
                </sw-button>
                <sw-button
                    variant="primary"
                    @click="onCreate"
                >
                    {{ $tc('supplier.priceUpdate.list.buttonCreate') }}
                </sw-button>
            </template>
        {% endblock %}

        {% block price_template_list_content %}
            <template #content>
                <sw-card :title="$tc('supplier.priceUpdate.list.filterTitle')">
                    <sw-entity-single-select
                        v-model:value="filterSupplierId"
                        entity="art_supplier"
                        :label="$tc('supplier.priceUpdate.list.filterSupplier')"
                        :placeholder="$tc('supplier.priceUpdate.list.filterSupplierPlaceholder')"
                        @update:value="onSupplierFilterChange"
                        allowClear
                    />
                </sw-card>

                <sw-entity-listing
                    v-if="templates"
                    :items="templates"
                    :repository="templateRepository"
                    :showSelection="false"
                    :columns="templateColumns"
                    :isLoading="isLoading"
                    :total="total"
                    @page-change="onPageChange"
                >
                    <template #column-supplier="{ item }">
                        {{ item.supplier?.name || '-' }}
                    </template>

                    <template #column-status="{ item }">
                        <sw-label
                            :variant="getStatusColor(item)"
                            size="small"
                        >
                            {{ getStatusLabel(item) }}
                        </sw-label>
                    </template>

                    <template #column-appliedAt="{ item }">
                        {{ formatDate(item.appliedAt) }}
                    </template>

                    <template #column-createdAt="{ item }">
                        {{ formatDate(item.createdAt) }}
                    </template>

                    <template #actions="{ item }">
                        <sw-context-menu-item
                            @click="onUpdatePrices(item)"
                        >
                            {{ $tc('supplier.priceUpdate.list.buttonUpdatePrices') }}
                        </sw-context-menu-item>

                        <sw-context-menu-item
                            variant="danger"
                            @click="onDelete(item.id)"
                        >
                            {{ $tc('supplier.priceUpdate.list.buttonDelete') }}
                        </sw-context-menu-item>
                    </template>
                </sw-entity-listing>
            </template>
        {% endblock %}
    </sw-page>
{% endblock %}
