{"version":3,"file":"artiss-supplier-B4ab3rvS.js","sources":["../../../app/administration/src/module/supplier/page/supplier-list/supplier-list.html.twig","../../../app/administration/src/module/supplier/page/supplier-list/index.js","../../../app/administration/src/module/supplier/page/supplier-detail/supplier-detail.html.twig","../../../app/administration/src/module/supplier/page/supplier-detail/index.js","../../../app/administration/src/module/supplier/page/supplier-create/supplier-create.html.twig","../../../app/administration/src/module/supplier/page/supplier-create/index.js","../../../app/administration/src/module/supplier/index.js"],"sourcesContent":["{% block supplier_list %}\n    <sw-page class=\"supplier-list\">\n        {% block supplier_list_smart_bar_header %}\n            <template #smart-bar-header>\n                <h2>\n                    {{ $tc('supplier.general.mainMenuItemGeneral') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        {% block supplier_list_smart_bar_actions %}\n            <template #smart-bar-actions>\n                {% block supplier_list_smart_bar_actions_add %}\n                    <sw-button\n                        :routerLink=\"{ name: 'artiss.supplier.create' }\"\n                        variant=\"primary\"\n                    >\n                        {{ $tc('supplier.list.buttonAddSupplier') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        {% block supplier_list_content %}\n            <template #content>\n                {% block supplier_list_content_list %}\n                    <sw-entity-listing\n                        v-if=\"suppliers\"\n                        :items=\"suppliers\"\n                        :repository=\"supplierRepository\"\n                        :showSelection=\"false\"\n                        :columns=\"supplierColumns\"\n                        :isLoading=\"isLoading\"\n                        :total=\"total\"\n                        detailRoute=\"artiss.supplier.detail\"\n                        @page-change=\"onPageChange\"\n                    >\n                    </sw-entity-listing>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n","import template from './supplier-list.html.twig';\n\nconst { Component } = Shopware;\nconst { Criteria } = Shopware.Data;\n\nComponent.register('supplier-list', {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    data() {\n        return {\n            suppliers: null,\n            isLoading: false,\n            total: 0,\n            page: 1,\n            limit: 25\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle()\n        };\n    },\n\n    computed: {\n        supplierRepository() {\n            return this.repositoryFactory.create('art_supplier');\n        },\n\n        supplierColumns() {\n            return [\n                {\n                    property: 'name',\n                    dataIndex: 'name',\n                    label: this.$tc('supplier.list.columnName'),\n                    routerLink: 'artiss.supplier.detail',\n                    inlineEdit: 'string',\n                    allowResize: true,\n                    primary: true\n                }\n            ];\n        }\n    },\n\n    created() {\n        this.getList();\n    },\n\n    methods: {\n        async getList() {\n            this.isLoading = true;\n\n            const criteria = new Criteria(this.page, this.limit);\n            criteria.addSorting(Criteria.sort('name', 'ASC'));\n\n            try {\n                const result = await this.supplierRepository.search(criteria);\n                this.suppliers = result;\n                this.total = result.total;\n            } catch (error) {\n                console.error('Error loading suppliers:', error);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        onPageChange({ page, limit }) {\n            this.page = page;\n            this.limit = limit;\n            this.getList();\n        }\n    }\n});\n","{% block supplier_detail %}\n    <sw-page class=\"supplier-detail\">\n        {% block supplier_detail_header %}\n            <template #smart-bar-header>\n                <h2>{{ identifier }}</h2>\n            </template>\n        {% endblock %}\n\n        {% block supplier_detail_actions %}\n            <template #smart-bar-actions>\n                {% block supplier_detail_actions_cancel %}\n                    <sw-button\n                        :routerLink=\"{ name: 'artiss.supplier.index' }\"\n                        :disabled=\"isLoading\"\n                    >\n                        {{ $tc('supplier.detail.buttonCancel') }}\n                    </sw-button>\n                {% endblock %}\n\n                {% block supplier_detail_actions_save %}\n                    <sw-button-process\n                        class=\"supplier-detail__save-action\"\n                        :isLoading=\"isLoading\"\n                        :processSuccess=\"processSuccess\"\n                        variant=\"primary\"\n                        @process-finish=\"saveFinish\"\n                        @click=\"onClickSave\"\n                    >\n                        {{ $tc('supplier.detail.buttonSave') }}\n                    </sw-button-process>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        {% block supplier_detail_content %}\n            <template #content>\n                <sw-card-view v-if=\"supplier\">\n                    {% block supplier_detail_content_card_general %}\n                        <sw-card\n                            :title=\"$tc('supplier.detail.cardTitleGeneral')\"\n                            :isLoading=\"isLoading\"\n                        >\n                            <sw-text-field\n                                v-model=\"supplier.name\"\n                                :label=\"$tc('supplier.detail.labelName')\"\n                                :placeholder=\"$tc('supplier.detail.placeholderName')\"\n                            >\n                            </sw-text-field>\n\n                            <sw-multi-select\n                                :value=\"safeManufacturerIds\"\n                                @update:value=\"onManufacturersChange\"\n                                :label=\"$tc('supplier.detail.labelManufacturers')\"\n                                :placeholder=\"$tc('supplier.detail.placeholderManufacturers')\"\n                                :options=\"manufacturerOptions\"\n                                labelProperty=\"label\"\n                                valueProperty=\"value\"\n                            >\n                            </sw-multi-select>\n                        </sw-card>\n                    {% endblock %}\n\n                    {% block supplier_detail_content_tabs %}\n                        <sw-card v-if=\"supplier && customFieldSets.length > 0\" :isLoading=\"isLoading\">\n                            <sw-custom-field-set-renderer\n                                :entity=\"supplier\"\n                                :sets=\"customFieldSets\"\n                            />\n                        </sw-card>\n                    {% endblock %}\n                </sw-card-view>\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n","import template from './supplier-detail.html.twig';\n\nconst { Component, Mixin } = Shopware;\nconst { Criteria } = Shopware.Data;\n\nconsole.log('[SUPPLIER-DETAIL] Registering component, timestamp:', Date.now());\n\nComponent.register('supplier-detail', {\n    template,\n\n    inject: [\n        'repositoryFactory',\n        'customFieldDataProviderService'\n    ],\n\n    mixins: [\n        Mixin.getByName('notification')\n    ],\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier)\n        };\n    },\n\n    data() {\n        return {\n            supplier: {\n                customFields: {}\n            },\n            isLoading: false,\n            processSuccess: false,\n            repository: null,\n            customFieldSets: [],\n            activeTab: 'contacts',\n            manufacturers: [],\n            // Field name filters for each tab\n            contactsFields: [\n                'supplier_contacts_city',\n                'supplier_contacts_phone',\n                'supplier_contacts_email',\n                'supplier_contacts_website'\n            ],\n            commercialFields: [\n                'supplier_commercial_purchase',\n                'supplier_commercial_margin',\n                'supplier_commercial_discount_opt',\n                'supplier_commercial_discount_online'\n            ],\n            additionalFields: [\n                'supplier_additional_details',\n                'supplier_additional_note',\n                'supplier_additional_comment_content',\n                'supplier_additional_potencial_tm'\n            ],\n            filesFields: [\n                'supplier_files_price_lists'\n            ]\n        };\n    },\n\n    computed: {\n        identifier() {\n            return this.supplier?.name || this.$tc('supplier.detail.titleNew');\n        },\n\n        supplierRepository() {\n            return this.repositoryFactory.create('art_supplier');\n        },\n\n        manufacturerRepository() {\n            return this.repositoryFactory.create('product_manufacturer');\n        },\n\n        manufacturerOptions() {\n            return this.manufacturers.map(manufacturer => ({\n                value: manufacturer.id,\n                label: manufacturer.name\n            }));\n        },\n\n        safeManufacturerIds: {\n            get() {\n                if (!this.supplier || !this.supplier.manufacturerIds) {\n                    return [];\n                }\n                if (!Array.isArray(this.supplier.manufacturerIds)) {\n                    return [];\n                }\n                return this.supplier.manufacturerIds;\n            },\n            set(value) {\n                if (this.supplier) {\n                    this.supplier.manufacturerIds = Array.isArray(value) ? value : [];\n                }\n            }\n        },\n\n        filteredContactsSets() {\n            return this.filterCustomFieldSets(this.contactsFields);\n        },\n\n        filteredCommercialSets() {\n            return this.filterCustomFieldSets(this.commercialFields);\n        },\n\n        filteredAdditionalSets() {\n            return this.filterCustomFieldSets(this.additionalFields);\n        },\n\n        filteredFilesSets() {\n            return this.filterCustomFieldSets(this.filesFields);\n        },\n\n        contactsFieldsWithConfig() {\n            return this.contactsFields\n                .map(fieldName => this.getCustomField(fieldName))\n                .filter(field => field && field.config);\n        },\n\n        commercialFieldsWithConfig() {\n            return this.commercialFields\n                .map(fieldName => this.getCustomField(fieldName))\n                .filter(field => field && field.config);\n        },\n\n        additionalFieldsWithConfig() {\n            return this.additionalFields\n                .map(fieldName => this.getCustomField(fieldName))\n                .filter(field => field && field.config);\n        },\n\n        filesFieldsWithConfig() {\n            return this.filesFields\n                .map(fieldName => this.getCustomField(fieldName))\n                .filter(field => field && field.config);\n        }\n    },\n\n    created() {\n        this.repository = this.supplierRepository;\n        this.loadManufacturers();\n        this.getSupplier();\n        this.loadCustomFieldSets();\n    },\n\n    mounted() {\n        // Set first tab as active after component is mounted\n        this.activeTab = 'contacts';\n    },\n\n    watch: {\n        activeTab(newVal) {\n            // Tab changed - test watch mode\n        }\n    },\n\n    methods: {\n        async loadManufacturers() {\n            try {\n                const criteria = new Criteria();\n                criteria.addSorting(Criteria.sort('name', 'ASC'));\n                criteria.setLimit(500);\n\n                const result = await this.manufacturerRepository.search(criteria);\n                this.manufacturers = result;\n            } catch (error) {\n                console.error('Error loading manufacturers:', error);\n            }\n        },\n\n        async loadCustomFieldSets() {\n            try {\n                const customFieldSetRepository = this.repositoryFactory.create('custom_field_set');\n                const criteria = new Criteria();\n                criteria.addAssociation('customFields');\n                criteria.addFilter(Criteria.equals('name', 'supplier_fields'));\n\n                const result = await customFieldSetRepository.search(criteria);\n                this.customFieldSets = Array.from(result);\n            } catch (error) {\n                console.error('Error loading custom field sets:', error);\n            }\n        },\n\n        getCustomField(fieldName) {\n            if (!this.customFieldSets || this.customFieldSets.length === 0) {\n                return null;\n            }\n\n            for (const set of this.customFieldSets) {\n                if (set.customFields) {\n                    const field = set.customFields.find(f => f.name === fieldName);\n                    if (field) {\n                        return field;\n                    }\n                }\n            }\n            return null;\n        },\n\n        async getSupplier() {\n            this.isLoading = true;\n            try {\n                if (this.$route.params.id) {\n                    const criteria = new Criteria();\n                    const entity = await this.repository.get(this.$route.params.id, Shopware.Context.api, criteria);\n                    this.supplier = entity;\n                } else {\n                    this.supplier = this.repository.create();\n                }\n\n                // Initialize customFields if null\n                if (!this.supplier.customFields) {\n                    this.supplier.customFields = {};\n                }\n                // Initialize manufacturerIds if null or not an array\n                if (!this.supplier.manufacturerIds || !Array.isArray(this.supplier.manufacturerIds)) {\n                    this.supplier.manufacturerIds = [];\n                }\n            } catch (error) {\n                console.error('Error loading supplier:', error);\n                this.createNotificationError({\n                    message: this.$tc('supplier.detail.errorLoad')\n                });\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        onClickSave() {\n            console.log('[SUPPLIER] onClickSave called, version: 2024-11-20-22:30');\n            this.isLoading = true;\n            this.processSuccess = false;\n            const isNew = !this.$route.params.id;\n            const supplierId = this.supplier.id;\n\n            console.log('[SUPPLIER] Saving supplier:', supplierId, 'isNew:', isNew);\n\n            return this.repository.save(this.supplier, Shopware.Context.api)\n                .then(() => {\n                    console.log('[SUPPLIER] Save successful, loading full data...');\n                    // После успешного сохранения принудительно перезагружаем данные с сервера\n                    const criteria = new Criteria();\n                    return this.repository.get(supplierId, Shopware.Context.api, criteria);\n                })\n                .then((loadedSupplier) => {\n                    console.log('[SUPPLIER] Loaded full supplier:', loadedSupplier);\n                    // Обновляем локальные данные загруженными с сервера\n                    this.supplier = loadedSupplier;\n\n                    // Инициализируем поля если они null\n                    if (!this.supplier.customFields) {\n                        this.supplier.customFields = {};\n                    }\n                    if (!this.supplier.manufacturerIds || !Array.isArray(this.supplier.manufacturerIds)) {\n                        this.supplier.manufacturerIds = [];\n                    }\n\n                    this.createNotificationSuccess({\n                        message: this.$tc('supplier.detail.successSave')\n                    });\n\n                    this.isLoading = false;\n                    this.processSuccess = true;\n\n                    if (isNew) {\n                        // Для нового поставщика перенаправляем на страницу редактирования\n                        return this.$router.push({\n                            name: 'artiss.supplier.detail',\n                            params: { id: supplierId }\n                        });\n                    }\n                })\n                .catch((error) => {\n                    console.error('Error saving supplier:', error);\n                    this.createNotificationError({\n                        message: this.$tc('supplier.detail.errorSave')\n                    });\n                    this.isLoading = false;\n                });\n        },\n\n        saveFinish() {\n            this.processSuccess = false;\n        },\n\n        onManufacturersChange(selectedValues) {\n            if (this.supplier) {\n                this.supplier.manufacturerIds = Array.isArray(selectedValues) ? selectedValues : [];\n            }\n        },\n\n        onTabChange(tabItem) {\n            if (tabItem && tabItem.name) {\n                this.activeTab = tabItem.name;\n            }\n        },\n\n        filterCustomFieldSets(fieldNames) {\n            if (!this.customFieldSets || this.customFieldSets.length === 0) {\n                return [];\n            }\n\n            return this.customFieldSets.map(set => {\n                if (!set.customFields || set.customFields.length === 0) {\n                    return null;\n                }\n\n                const filteredFields = set.customFields.filter(field =>\n                    fieldNames.includes(field.name)\n                );\n\n                if (filteredFields.length === 0) {\n                    return null;\n                }\n\n                return {\n                    ...set,\n                    customFields: filteredFields\n                };\n            }).filter(set => set !== null);\n        }\n    }\n});\n","{% block supplier_create %}\n    {% parent %}\n{% endblock %}\n","import template from './supplier-create.html.twig';\n\nconst { Component } = Shopware;\nconst { Criteria } = Shopware.Data;\n\nconsole.log('[SUPPLIER-CREATE] Registering component, timestamp:', Date.now());\n\nComponent.extend('supplier-create', 'supplier-detail', {\n    template,\n\n    methods: {\n        getSupplier() {\n            this.supplier = this.repository.create();\n        },\n\n        onClickSave() {\n            console.log('[SUPPLIER-CREATE] onClickSave called, version: 2024-11-20-22:40');\n            this.isLoading = true;\n            this.processSuccess = false;\n            const supplierId = this.supplier.id;\n\n            console.log('[SUPPLIER-CREATE] Creating supplier:', supplierId);\n\n            return this.repository.save(this.supplier, Shopware.Context.api)\n                .then(() => {\n                    console.log('[SUPPLIER-CREATE] Save successful, loading full data...');\n                    const criteria = new Criteria();\n                    return this.repository.get(supplierId, Shopware.Context.api, criteria);\n                })\n                .then((loadedSupplier) => {\n                    console.log('[SUPPLIER-CREATE] Loaded full supplier:', loadedSupplier);\n                    this.supplier = loadedSupplier;\n\n                    if (!this.supplier.customFields) {\n                        this.supplier.customFields = {};\n                    }\n                    if (!this.supplier.manufacturerIds || !Array.isArray(this.supplier.manufacturerIds)) {\n                        this.supplier.manufacturerIds = [];\n                    }\n\n                    this.createNotificationSuccess({\n                        message: this.$tc('supplier.detail.successSave')\n                    });\n\n                    this.isLoading = false;\n                    this.processSuccess = true;\n\n                    // Перенаправляем на страницу редактирования\n                    return this.$router.push({\n                        name: 'artiss.supplier.detail',\n                        params: { id: supplierId }\n                    });\n                })\n                .catch((error) => {\n                    console.error('[SUPPLIER-CREATE] Error:', error);\n                    this.createNotificationError({\n                        message: this.$tc('supplier.detail.errorCreate')\n                    });\n                    this.isLoading = false;\n                });\n        }\n    }\n});\n","// Register snippets\nimport deDE from './snippet/de-DE.json';\nimport enGB from './snippet/en-GB.json';\nimport ruRU from './snippet/ru-RU.json';\nimport ruUA from './snippet/ru-UA.json';\nimport ukUA from './snippet/uk-UA.json';\n\n// Import pages\nimport './page/supplier-list';\nimport './page/supplier-detail';\nimport './page/supplier-create';\n\nconst { Module } = Shopware;\n\nShopware.Locale.extend('de-DE', deDE);\nShopware.Locale.extend('en-GB', enGB);\nShopware.Locale.extend('ru-RU', ruRU);\nShopware.Locale.extend('ru-UA', ruUA);\nShopware.Locale.extend('uk-UA', ukUA);\n\nModule.register('artiss-supplier', {\n    type: 'plugin',\n    name: 'supplier',\n    title: 'supplier.general.mainMenuItemGeneral',\n    description: 'supplier.general.description',\n    version: '1.0.0',\n    targetVersion: '1.0.0',\n    color: '#ff3d58',\n    icon: 'regular-shopping-bag',\n    entity: 'art_supplier',\n\n    routes: {\n        index: {\n            component: 'supplier-list',\n            path: 'index',\n        },\n        detail: {\n            component: 'supplier-detail',\n            path: 'detail/:id',\n            meta: {\n                parentPath: 'artiss.supplier.index',\n            }\n        },\n        create: {\n            component: 'supplier-create',\n            path: 'create',\n            meta: {\n                parentPath: 'artiss.supplier.index',\n            }\n        }\n    },\n\n    navigation: [{\n        id: 'artiss-supplier',\n        label: 'supplier.general.mainMenuItemGeneral',\n        color: '#ff3d58',\n        path: 'artiss.supplier.index',\n        icon: 'regular-shopping-bag',\n        parent: 'sw-catalogue',\n        position: 100,\n    }]\n});\n"],"names":["template$2","Component","Criteria","template","criteria","result","error","page","limit","template$1","Mixin","_a","manufacturer","value","fieldName","field","newVal","customFieldSetRepository","set","f","entity","isNew","supplierId","loadedSupplier","selectedValues","tabItem","fieldNames","filteredFields","Module","deDE","enGB","ruRU","ruUA","ukUA"],"mappings":"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"}