const a={general:{mainMenuLabel:"ARTISS"}},l={general:{mainMenuItemGeneral:"Lieferanten",description:"Lieferanten verwalten"},list:{buttonAddSupplier:"Lieferant hinzufügen",columnName:"Name"},detail:{cardTitleGeneral:"Allgemeine Informationen",labelName:"Name",placeholderName:"Lieferantenname eingeben...",labelManufacturers:"Marken auf der Website",placeholderManufacturers:"Marken auswählen...",buttonSave:"Speichern",buttonCancel:"Abbrechen",successSave:"Lieferant erfolgreich gespeichert",errorSave:"Fehler beim Speichern des Lieferanten",errorLoad:"Fehler beim Laden des Lieferanten",errorCreate:"Fehler beim Erstellen des Lieferanten",titleNew:"Neuer Lieferant",tabContacts:"Kontakte",tabCommercial:"Geschäftsbedingungen",tabAdditional:"Zusätzlich",tabFiles:"Dateien"}},n={artiss:a,supplier:l},o={general:{mainMenuLabel:"ARTISS"}},p={general:{mainMenuItemGeneral:"Suppliers",description:"Manage suppliers"},list:{buttonAddSupplier:"Add supplier",columnName:"Name"},detail:{cardTitleGeneral:"General information",labelName:"Name",placeholderName:"Enter supplier name...",labelManufacturers:"Brands on Website",placeholderManufacturers:"Select brands...",buttonSave:"Save",buttonCancel:"Cancel",successSave:"Supplier saved successfully",errorSave:"Error saving supplier",errorLoad:"Error loading supplier",errorCreate:"Error creating supplier",titleNew:"New supplier",tabContacts:"Contacts",tabCommercial:"Commercial Terms",tabAdditional:"Additional",tabFiles:"Files"}},u={artiss:o,supplier:p},c={general:{mainMenuLabel:"ARTISS"}},d={general:{mainMenuItemGeneral:"Поставщики",description:"Управление поставщиками"},list:{buttonAddSupplier:"Добавить поставщика",columnName:"Название"},detail:{cardTitleGeneral:"Общая информация",labelName:"Название",placeholderName:"Введите название поставщика...",labelManufacturers:"ТМ на сайте",placeholderManufacturers:"Выберите ТМ...",buttonSave:"Сохранить",buttonCancel:"Отменить",successSave:"Поставщик успешно сохранен",errorSave:"Ошибка при сохранении поставщика",errorLoad:"Ошибка при загрузке поставщика",errorCreate:"Ошибка при создании поставщика",titleNew:"Новый поставщик",tabContacts:"Контакты",tabCommercial:"Коммерческие условия",tabAdditional:"Дополнительно",tabFiles:"Файлы"}},m={artiss:c,supplier:d},h={general:{mainMenuLabel:"ARTISS"}},b={general:{mainMenuItemGeneral:"Поставщики",description:"Управление поставщиками"},list:{buttonAddSupplier:"Добавить поставщика",columnName:"Название"},detail:{cardTitleGeneral:"Общая информация",labelName:"Название",placeholderName:"Введите название поставщика...",labelManufacturers:"ТМ на сайте",placeholderManufacturers:"Выберите ТМ...",buttonSave:"Сохранить",buttonCancel:"Отменить",successSave:"Поставщик успешно сохранен",errorSave:"Ошибка при сохранении поставщика",errorLoad:"Ошибка при загрузке поставщика",errorCreate:"Ошибка при создании поставщика",titleNew:"Новый поставщик",tabContacts:"Контакты",tabCommercial:"Коммерческие условия",tabAdditional:"Дополнительно",tabFiles:"Файлы"}},f={artiss:h,supplier:b},g={general:{mainMenuLabel:"ARTISS"}},S={general:{mainMenuItemGeneral:"Постачальники",description:"Керування постачальниками"},list:{buttonAddSupplier:"Додати постачальника",columnName:"Назва"},detail:{cardTitleGeneral:"Загальна інформація",labelName:"Назва",placeholderName:"Введіть назву постачальника...",labelManufacturers:"ТМ на сайті",placeholderManufacturers:"Оберіть ТМ...",buttonSave:"Зберегти",buttonCancel:"Скасувати",successSave:"Постачальник успішно збережений",errorSave:"Помилка при збереженні постачальника",errorLoad:"Помилка при завантаженні постачальника",errorCreate:"Помилка при створенні постачальника",titleNew:"Новий постачальник",tabContacts:"Контакти",tabCommercial:"Комерційні умови",tabAdditional:"Додатково",tabFiles:"Файли"}},y={artiss:g,supplier:S},w=`{% block supplier_list %} <sw-page class="supplier-list"> {% block supplier_list_smart_bar_header %} <template #smart-bar-header> <h2> {{ $tc('supplier.general.mainMenuItemGeneral') }} </h2> </template> {% endblock %} {% block supplier_list_smart_bar_actions %} <template #smart-bar-actions> {% block supplier_list_smart_bar_actions_add %} <sw-button :routerLink="{ name: 'artiss.supplier.create' }" variant="primary" > {{ $tc('supplier.list.buttonAddSupplier') }} </sw-button> {% endblock %} </template> {% endblock %} {% block supplier_list_content %} <template #content> {% block supplier_list_content_list %} <sw-entity-listing v-if="suppliers" :items="suppliers" :repository="supplierRepository" :showSelection="false" :columns="supplierColumns" :isLoading="isLoading" :total="total" detailRoute="artiss.supplier.detail" @page-change="onPageChange" > </sw-entity-listing> {% endblock %} </template> {% endblock %} </sw-page> {% endblock %}`,{Component:L}=Shopware,{Criteria:s}=Shopware.Data;L.register("supplier-list",{template:w,inject:["repositoryFactory"],data(){return{suppliers:null,isLoading:!1,total:0,page:1,limit:25}},metaInfo(){return{title:this.$createTitle()}},computed:{supplierRepository(){return this.repositoryFactory.create("art_supplier")},supplierColumns(){return[{property:"name",dataIndex:"name",label:this.$tc("supplier.list.columnName"),routerLink:"artiss.supplier.detail",inlineEdit:"string",allowResize:!0,primary:!0}]}},created(){this.getList()},methods:{async getList(){this.isLoading=!0;const e=new s(this.page,this.limit);e.addSorting(s.sort("name","ASC"));try{const t=await this.supplierRepository.search(e);this.suppliers=t,this.total=t.total}finally{this.isLoading=!1}},onPageChange({page:e,limit:t}){this.page=e,this.limit=t,this.getList()}}});const C=`{% block supplier_detail %} <sw-page class="supplier-detail"> {% block supplier_detail_header %} <template #smart-bar-header> <h2>{{ identifier }}</h2> </template> {% endblock %} {% block supplier_detail_actions %} <template #smart-bar-actions> {% block supplier_detail_actions_cancel %} <sw-button :routerLink="{ name: 'artiss.supplier.index' }" :disabled="isLoading" > {{ $tc('supplier.detail.buttonCancel') }} </sw-button> {% endblock %} {% block supplier_detail_actions_save %} <sw-button-process class="supplier-detail__save-action" :isLoading="isLoading" :processSuccess="processSuccess" variant="primary" @process-finish="saveFinish" @click="onClickSave" > {{ $tc('supplier.detail.buttonSave') }} </sw-button-process> {% endblock %} </template> {% endblock %} {% block supplier_detail_content %} <template #content> <sw-card-view v-if="supplier"> {% block supplier_detail_content_card_general %} <sw-card :title="$tc('supplier.detail.cardTitleGeneral')" :isLoading="isLoading" > <sw-text-field v-model="supplier.name" :label="$tc('supplier.detail.labelName')" :placeholder="$tc('supplier.detail.placeholderName')" > </sw-text-field> <sw-multi-select :value="safeManufacturerIds" @update:value="onManufacturersChange" :label="$tc('supplier.detail.labelManufacturers')" :placeholder="$tc('supplier.detail.placeholderManufacturers')" :options="manufacturerOptions" labelProperty="label" valueProperty="value" > </sw-multi-select> </sw-card> {% endblock %} {% block supplier_detail_content_tabs %} <sw-card v-if="supplier && customFieldSets.length > 0" :isLoading="isLoading"> <sw-custom-field-set-renderer :entity="supplier" :sets="customFieldSets" /> </sw-card> {% endblock %} </sw-card-view> </template> {% endblock %} </sw-page> {% endblock %}`,{Component:_,Mixin:v}=Shopware,{Criteria:r}=Shopware.Data;_.register("supplier-detail",{template:C,inject:["repositoryFactory","customFieldDataProviderService"],mixins:[v.getByName("notification")],metaInfo(){return{title:this.$createTitle(this.identifier)}},data(){return{supplier:{customFields:{}},isLoading:!1,processSuccess:!1,repository:null,customFieldSets:[],manufacturers:[]}},computed:{identifier(){var e;return((e=this.supplier)==null?void 0:e.name)||this.$tc("supplier.detail.titleNew")},supplierRepository(){return this.repositoryFactory.create("art_supplier")},manufacturerRepository(){return this.repositoryFactory.create("product_manufacturer")},manufacturerOptions(){return this.manufacturers.map(e=>({value:e.id,label:e.name}))},safeManufacturerIds:{get(){return!this.supplier||!this.supplier.manufacturerIds?[]:Array.isArray(this.supplier.manufacturerIds)?this.supplier.manufacturerIds:[]},set(e){this.supplier&&(this.supplier.manufacturerIds=Array.isArray(e)?e:[])}}},created(){this.repository=this.supplierRepository,this.loadManufacturers(),this.getSupplier(),this.loadCustomFieldSets()},methods:{async loadManufacturers(){try{const e=new r;e.addSorting(r.sort("name","ASC")),e.setLimit(500);const t=await this.manufacturerRepository.search(e);this.manufacturers=t}catch{this.createNotificationError({message:this.$tc("supplier.detail.errorLoadManufacturers")})}},async loadCustomFieldSets(){try{const e=this.repositoryFactory.create("custom_field_set"),t=new r;t.addAssociation("customFields"),t.addFilter(r.equals("name","supplier_fields"));const i=await e.search(t);this.customFieldSets=Array.from(i)}catch{this.createNotificationError({message:this.$tc("supplier.detail.errorLoadFields")})}},async getSupplier(){this.isLoading=!0;try{if(this.$route.params.id){const e=new r,t=await this.repository.get(this.$route.params.id,Shopware.Context.api,e);this.supplier=t}else this.supplier=this.repository.create();this.supplier.customFields||(this.supplier.customFields={}),(!this.supplier.manufacturerIds||!Array.isArray(this.supplier.manufacturerIds))&&(this.supplier.manufacturerIds=[])}catch{this.createNotificationError({message:this.$tc("supplier.detail.errorLoad")})}finally{this.isLoading=!1}},onClickSave(){this.isLoading=!0,this.processSuccess=!1;const e=!this.$route.params.id,t=this.supplier.id;return this.repository.save(this.supplier,Shopware.Context.api).then(()=>{const i=new r;return this.repository.get(t,Shopware.Context.api,i)}).then(i=>{if(this.supplier=i,this.supplier.customFields||(this.supplier.customFields={}),(!this.supplier.manufacturerIds||!Array.isArray(this.supplier.manufacturerIds))&&(this.supplier.manufacturerIds=[]),this.createNotificationSuccess({message:this.$tc("supplier.detail.successSave")}),this.isLoading=!1,this.processSuccess=!0,e)return this.$router.push({name:"artiss.supplier.detail",params:{id:t}})}).catch(()=>{this.createNotificationError({message:this.$tc("supplier.detail.errorSave")}),this.isLoading=!1})},saveFinish(){this.processSuccess=!1},onManufacturersChange(e){this.supplier&&(this.supplier.manufacturerIds=Array.isArray(e)?e:[])}}});const k="{% block supplier_create %} {% parent %} {% endblock %}",{Component:A}=Shopware,{Criteria:N}=Shopware.Data;A.extend("supplier-create","supplier-detail",{template:k,methods:{getSupplier(){this.supplier=this.repository.create()},onClickSave(){this.isLoading=!0,this.processSuccess=!1;const e=this.supplier.id;return this.repository.save(this.supplier,Shopware.Context.api).then(()=>{const t=new N;return this.repository.get(e,Shopware.Context.api,t)}).then(t=>(this.supplier=t,this.supplier.customFields||(this.supplier.customFields={}),(!this.supplier.manufacturerIds||!Array.isArray(this.supplier.manufacturerIds))&&(this.supplier.manufacturerIds=[]),this.createNotificationSuccess({message:this.$tc("supplier.detail.successSave")}),this.isLoading=!1,this.processSuccess=!0,this.$router.push({name:"artiss.supplier.detail",params:{id:e}}))).catch(()=>{this.createNotificationError({message:this.$tc("supplier.detail.errorCreate")}),this.isLoading=!1})}}});const{Module:$}=Shopware;Shopware.Locale.extend("de-DE",n);Shopware.Locale.extend("en-GB",u);Shopware.Locale.extend("ru-RU",m);Shopware.Locale.extend("ru-UA",f);Shopware.Locale.extend("uk-UA",y);$.register("artiss-supplier",{type:"plugin",name:"supplier",title:"supplier.general.mainMenuItemGeneral",description:"supplier.general.description",version:"1.0.0",targetVersion:"1.0.0",color:"#ff3d58",icon:"regular-shopping-bag",entity:"art_supplier",routes:{index:{component:"supplier-list",path:"index"},detail:{component:"supplier-detail",path:"detail/:id",meta:{parentPath:"artiss.supplier.index"}},create:{component:"supplier-create",path:"create",meta:{parentPath:"artiss.supplier.index"}}},navigation:[{id:"artiss-supplier",label:"supplier.general.mainMenuItemGeneral",color:"#ff3d58",path:"artiss.supplier.index",icon:"regular-shopping-bag",parent:"sw-catalogue",position:100}]});
//# sourceMappingURL=artiss-supplier-D0rbKxWe.js.map
